# ============================================
# SCHOOL PATHFINDER - ENVIRONMENT VARIABLES
# ============================================

# --------------------------------------------
# DATABASE
# --------------------------------------------

# Neon Postgres Database (Main Application Data)
# Get from: https://neon.tech > Your Project > Connection Details
DATABASE_URL=postgresql://postgres.your-project-ref:[YOUR-PASSWORD]@aws-0-region.pooler.supabase.com:6543/postgres

# Vercel KV (Redis) - For Live Metrics Storage
# Get from: Vercel Dashboard > Storage > Create KV Database
KV_REST_API_URL=https://your-kv-instance.kv.vercel-storage.com
KV_REST_API_TOKEN=your_kv_rest_api_token_here

# --------------------------------------------
# SUPABASE (Legacy - Optional)
# --------------------------------------------

VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=your_supabase_anon_key

# --------------------------------------------
# AUTHENTICATION & SECURITY
# --------------------------------------------

# Cron Job Authentication (for hourly metrics aggregation)
# Generate a secure random string (e.g., openssl rand -hex 32)
# This prevents unauthorized cron job execution
CRON_SECRET=your_secure_random_string_here

# --------------------------------------------
# API CONFIGURATION
# --------------------------------------------

# API URL (for production, set this to your deployed API URL)
VITE_API_URL=http://localhost:3001

# --------------------------------------------
# LOCAL DEVELOPMENT NOTES
# --------------------------------------------

# 1. Copy this file to .env
# 2. Fill in all values
# 3. Never commit .env to version control
# 4. For local testing of cron jobs:
#    - Use tools like ngrok to expose localhost
#    - Test cron endpoint manually: POST /api/cron/aggregate-metrics
#      with header: Authorization: Bearer YOUR_CRON_SECRET

# 5. For local KV testing:
#    - Use Vercel CLI: npm i -g vercel
#    - Run: vercel env pull .env.local
#    - This downloads your KV credentials

# --------------------------------------------
# DEPLOYMENT CHECKLIST
# --------------------------------------------

# ✅ 1. Create Vercel KV database (Vercel Dashboard > Storage > Create KV)
# ✅ 2. Set KV_REST_API_URL and KV_REST_API_TOKEN in Vercel env vars
# ✅ 3. Generate and set CRON_SECRET in Vercel env vars (use: openssl rand -hex 32)
# ✅ 4. Verify vercel.json has cron configuration
# ✅ 5. Deploy and check /api/metrics endpoint
# ✅ 6. Wait 1 hour and verify cron job ran (check Vercel logs)
# ✅ 7. Monitor homepage for live metrics display
# ✅ 8. Test visitor tracking: open homepage in incognito
# ✅ 9. Test assessment tracking: complete an assessment
# ✅ 10. Verify metrics increment correctly
